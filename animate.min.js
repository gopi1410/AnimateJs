function initLine(a,b,c,d,e,f,g,h,i,j,k,l){if(!h)h=100;if(!i)i=1;var m=a;var n=m.getContext("2d");n.beginPath();if(f)n.strokeStyle=f;if(g)n.lineWidth=g;n.moveTo(b,c);var o=[];var p=0;o[0]=new Array(h);o[1]=new Array(h);var q=(d-b)/h;var r=(e-c)/h;for(p=0;p<=h;p++){o[0][p]=b+p*q;o[1][p]=c+p*r}if(j)j();p=0;var s=o[0].length;var t=setInterval(function(){n.lineTo(o[0][p],o[1][p]);n.stroke();if(k)k();if(p++===s){n.closePath();clearInterval(t);if(l)l()}},1e3*i/h)}function initLines(a,b,c,d,e,f,g,h){function i(b){var f=b.length;if(f==1){if(h)h();return}var j=b[0];var k=b[1];a.animateLine(j[0],j[1],k[0],k[1],{lineColour:c,lineWidth:d,duration:e,draw:g,stop:function(){i(b.slice(1))}})}if(!g){g=function(){}}if(f)f();i(b)}function initPoints(a,b,c,d,e,f,g,h){function i(b){var f=b.length;if(f==0){if(h)h();return}var j=b[0];var k=b[1];a.animateLine(j[0],j[1],k[0],k[1],{lineColour:c,lineWidth:d,duration:e,draw:g,stop:function(){i(b.slice(2))}})}if(f)f();i(b)}function initCircle(a,b,c,d,e,f,g,h,i,j,k,l,m){if(!g)g=100;if(!h)h=1;var n=a;var o=n.getContext("2d");var p=[];var q=0;for(q=0;q<=g;q++){p[q]=q*(2*Math.PI/g)}if(k)k();if(i==="fillBefore"){o.beginPath();if(j)o.fillStyle=j;o.arc(b,c,d,0,2*Math.PI);o.fill();o.closePath()}o.beginPath();if(e)o.strokeStyle=e;if(f)o.lineWidth=f;else f=1;q=0;var r=p.length;var s=setInterval(function(){o.arc(b,c,d,p[q],p[q+1]);o.stroke();if(l)l();if(q++===r){o.closePath();clearInterval(s);if(i==="fillAfter"){o.beginPath();if(j)o.fillStyle=j;o.arc(b,c,d-f/2,0,2*Math.PI);o.fill();o.closePath()}if(m){m()}}},1e3*h/g)}function initRect(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function u(){a.animateLine(b,c,d,c,{lineColour:g,lineWidth:h,divisions:i,totalTime:j/4,draw:n,stop:function(){v()}})}function v(){a.animateLine(d,c,d,e,{lineColour:g,lineWidth:h,divisions:i,totalTime:j/4,draw:n,stop:function(){w()}})}function w(){a.animateLine(d,e,b,e,{lineColour:g,lineWidth:h,divisions:i,totalTime:j/4,draw:n,stop:function(){x()}})}function x(){a.animateLine(b,e,b,c,{lineColour:g,lineWidth:h,divisions:i,totalTime:j/4,draw:n,stop:function(){C()}})}function y(){a.animateLine(b,c,b,e,{lineColour:g,lineWidth:h,divisions:i,totalTime:j/4,draw:n,stop:function(){z()}})}function z(){a.animateLine(b,e,d,e,{lineColour:g,lineWidth:h,divisions:i,totalTime:j/4,draw:n,stop:function(){A()}})}function A(){a.animateLine(d,e,d,c,{lineColour:g,lineWidth:h,divisions:i,totalTime:j/4,draw:n,stop:function(){B()}})}function B(){a.animateLine(d,c,b,c,{lineColour:g,lineWidth:h,divisions:i,totalTime:j/4,draw:n,stop:function(){C()}})}function C(){if(k==="fillAfter"){if(!h)h=1;q.beginPath();if(l)q.fillStyle=l;q.rect(b+h/2,c+h/2,Math.abs(d-b)-h,Math.abs(e-c)-h);q.fill();q.closePath()}o()}var p=a;var q=p.getContext("2d");var r=Math.abs(d-b);var s=Math.abs(e-c);var t=r+s;if(!o)o=function(){};if(!n)n=function(){};if(m)m();if(k==="fillBefore"){q.beginPath();if(l)q.fillStyle=l;q.rect(b,c,Math.abs(d-b),Math.abs(e-c));q.fill();q.closePath()}if(f)y();else u()}function initTriangle(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function s(){a.animateLine(b,c,d,e,{lineColour:h,lineWidth:i,divisions:j,totalTime:k/3,draw:o,stop:function(){t()}})}function t(){a.animateLine(d,e,f,g,{lineColour:h,lineWidth:i,divisions:j,totalTime:k/3,draw:o,stop:function(){u()}})}function u(){a.animateLine(f,g,b,c,{lineColour:h,lineWidth:i,divisions:j,totalTime:k/3,draw:o,stop:function(){v()}})}function v(){if(l==="fillAfter"){r.beginPath();if(m)r.fillStyle=m;r.moveTo(b,c);r.lineTo(d,e);r.lineTo(f,g);r.lineTo(b,c);r.fill();r.closePath()}p()}var q=a;var r=q.getContext("2d");if(!p)p=function(){};if(!o)o=function(){};if(n)n();if(l==="fillBefore"){r.beginPath();if(m)r.fillStyle=m;r.moveTo(b,c);r.lineTo(d,e);r.lineTo(f,g);r.lineTo(b,c);r.fill();r.closePath()}s()}HTMLCanvasElement.prototype.animateLine=function(a,b,c,d,e){if(e)initLine(this,a,b,c,d,e.lineColour,e.lineWidth,e.divisions,e.duration,e.start,e.draw,e.stop);else initLine(this,a,b,c,d)};HTMLCanvasElement.prototype.animateLines=function(a,b){if(b)initLines(this,a,b.lineColour,b.lineWidth,b.duration,b.start,b.draw,b.stop);else initLines(this,a)};HTMLCanvasElement.prototype.animatePoints=function(a,b){if(b)initPoints(this,a,b.lineColour,b.lineWidth,b.duration,b.start,b.draw,b.stop);else initPoints(this,a)};HTMLCanvasElement.prototype.animateRect=function(a,b,c,d,e){if(e)initRect(this,a,b,c,d,e.direction,e.lineColour,e.lineWidth,e.divisions,e.duration,e.fill,e.fillColour,e.start,e.draw,e.stop);else initRect(this,a,b,c,d)};HTMLCanvasElement.prototype.animateTriangle=function(a,b,c,d,e,f,g){if(g)initTriangle(this,a,b,c,d,e,f,g.lineColour,g.lineWidth,g.divisions,g.duration,g.fill,g.fillColour,g.start,g.draw,g.stop);else initTriangle(this,a,b,c,d,e,f)};HTMLCanvasElement.prototype.animateCircle=function(a,b,c,d){if(d)initCircle(this,a,b,c,d.lineColour,d.lineWidth,d.divisions,d.duration,d.fill,d.fillColour,d.start,d.draw,d.stop);else initCircle(this,a,b,c)}